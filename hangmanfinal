/* Directories including slot */
#include <stdio.h>
#include <stdlib.h>
#include <stdbool.h>
#include <string.h>
#include <time.h>
#include <ctype.h>
/*List declaration for pointer words */
#define Len 14
/* This function will generate random word from list */
int wins=0,loss=0;
char* generate(void);
char* generate(void)
{
    char *list[]={"feeling","bat","fortune","cricket","unknown","ability","account","battery","century","allergy","calcium","bromine",
    "captain","vehicle"};
    int num;
    char *pim;
    num=rand()%Len;
    pim=list[num];
    return pim;
}
int play_game(void);

int main(void)
{
    char mood;
    srand((unsigned) time(NULL));
    printf(" *** HANGMAN GAME ***\nGiven below are the rules of this game:\n1. The game consists of a secret word, which you have to guess.\n");
    printf("2. You have 5 turns to do so. Each incorrect guess causes loss of one turn while no loss if it is a correct guess.\n");
    printf("3. Each - sign shown is the letter which is not yet revealed.\n4. If you run out of turns before guessing the word, you will lose!\n");
    printf("5. After each game, you will be asked whether you want to play or not. Enter Y for yes and N for no.\n");
    printf("6. ALL GUESSES MUST BE IN LOWER CASE ALPHABETS. ALL OTHER CHARACTERS WILL BE TREATED AS WRONG GUESS!\n");
    printf("7. The game has started below! Have Fun! :)\n");
    do {
        play_game();
        printf("\nPlay Again? (Y for yes, N for no): ");
        do{mood=getchar();} while(getchar() != '\n');
        printf("\n");
    }  while(mood=='y' || mood=='Y');

    printf("\nTotal number of wins: %d\nTotal number of loss: %d\nHave a Good Day!",wins,loss);
    return 0;
}

int play_game(void)
{
    char* target;
    target=generate();
    int len=strlen(target);
    char gin[len+1];
    char *guess;
    guess=gin;
    /* Fix set up for the game by assuming fixed area for guess func */
    for(int i=0;i<len;i++)
    {
        printf("- ");
        guess[i]='-';
    }
    printf("\n");
    int turns=5,points=len,f=0;
    bool finder;
    char input;
    char ping;
    for(;turns>0;)
    {
        finder=true;
        printf("Enter your guess: ");
        do{input=getchar();} while(getchar()!='\n');
        for(int j=0;j<len;j++)
        {
            if(target[j]==input)
            {
                guess[j]=input;
                finder=false;
            }
        }
        printf("\n");
        for(int pr=0;pr<len;pr++) printf("%c ",guess[pr]);
        printf("\n");
        ping=guess[0];
        if(strcmp(guess,target)==0) 
        {
            printf("You won this game!!!\nCongratulations :) You did it!\n");
            wins++;
            return 0;
        }
        if(finder) turns=turns-1;
        printf("The number of turns left is %d\n",turns);
    }
    if(strcmp(guess,target)==0)
    {
        printf("You won this game!!!\nCongratulations :) Seems like you have utilised all the turns to win!\n");
        wins++;
        return 0;
    }
    else
    {
        printf("You lost this game!!!\nThe word was %s!\n",target);
        loss++;
        return 0;
    }
}
